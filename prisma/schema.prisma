generator client {
    provider = "prisma-client"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
}

//* Type - PostVisibility
enum PostVisibility {
    PRIVATE
    PUBLIC
}

//* Type - PostStatus
enum PostStatus {
    PENDING_REVIEW
    APPROVED
    REJECTED
}

//* Type - ReactionType
enum ReactionType {
    POSITIVE
    NEGATIVE
}

//* Type - NotificationType
enum NotificationType {
    ANNOUNCEMENT
    REVIEW_REQUEST
    POST_REVIEW
    POST_REACTION
    POST_COMMENT
    COMMENT_REACTION
    COMMENT_REPLY
}

//* Type - NotificationSubjectType
enum NotificationSubjectType {
    PLATFORM
    POST
    COMMENT
}

//* Type - ProfileGender
enum ProfileGender {
    MALE
    FEMALE
    LGBTQ_PLUS
}

//* Type - ProfilePronouns
enum ProfilePronouns {
    HE_HIM
    SHE_HER
    THEY_THEM
}

//* Model - Profile
model Profile {
    id           String          @id @default(uuid()) @db.Uuid
    user_id      String          @unique @db.Uuid
    display_name String          @db.VarChar(50)
    phone        String?         @db.VarChar(17)
    bio          String?         @db.VarChar(200)
    is_verified  Boolean         @default(false)
    picture      String
    banner       String?
    gender       ProfileGender
    pronouns     ProfilePronouns
    website      String?
    facebook     String?
    linkedin     String?
    x_twitter    String?
    instagram    String?
    github       String?
    updated_at   DateTime        @updatedAt
}

//* Model - Post
model Post {
    id                  String         @id @default(uuid()) @db.Uuid
    author_id           String         @db.Uuid
    thumbnail           String?
    title               String         @db.VarChar(100)
    content             String?
    tags                String[]       @default([])
    visibility          PostVisibility @default(PUBLIC)
    read_time           String         @db.VarChar(7)
    views               Int            @default(0)
    is_featured         Boolean        @default(false)
    review_requested_at DateTime       @default(now())
    reviewed_at         DateTime?
    updated_at          DateTime       @updatedAt
    status              PostStatus     @default(PENDING_REVIEW)
}

//* Model - Reaction
model Reaction {
    id         String       @id @default(uuid()) @db.Uuid
    user_id    String       @db.Uuid
    post_id    String?      @db.Uuid
    comment_id String?      @db.Uuid
    type       ReactionType
    reacted_at DateTime     @default(now())
}

//* Model - Comment
model Comment {
    id         String   @id @default(uuid()) @db.Uuid
    user_id    String   @db.Uuid
    post_id    String   @db.Uuid
    parent_id  String?  @db.Uuid
    content    String
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

//* Model - Notification
model Notification {
    id           String                  @id @default(uuid()) @db.Uuid
    receiver_id  String                  @db.Uuid
    sender_id    String                  @db.Uuid
    subject_id   String                  @db.Uuid
    type         NotificationType
    subject_type NotificationSubjectType
    has_seen     Boolean                 @default(false)
    created_at   DateTime                @default(now())
}
